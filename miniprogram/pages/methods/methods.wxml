<!--pages/methods/methods.wxml-->
<view class="container">
  <!-- åˆ†ç±»æ ‡ç­¾ -->
  <view class="category-tabs">
    <scroll-view class="tabs-scroll" scroll-x>
      <view class="tabs-wrapper">
        <view 
          class="tab-item {{ currentCategory === item.id ? 'active' : '' }}" 
          wx:for="{{ categories }}" 
          wx:key="id"
          bindtap="onCategoryChange"
          data-id="{{ item.id }}"
        >
          <text class="tab-text">{{ item.name }}</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- æ–‡ç« åˆ—è¡¨ -->
  <view class="article-list">
    <view 
      class="article-item card" 
      wx:for="{{ articles }}" 
      wx:key="_id"
      bindtap="goToArticle"
      data-id="{{ item._id }}"
    >
      <!-- å°é¢å›¾ -->
      <image 
        wx:if="{{ item.coverImage }}"
        class="article-cover" 
        src="{{ item.coverImage }}" 
        mode="aspectFill"
      ></image>
      
      <!-- æ–‡ç« ä¿¡æ¯ -->
      <view class="article-info">
        <text class="article-title">{{ item.title }}</text>
        <text class="article-summary text-ellipsis-2">{{ item.summary }}</text>
        
        <view class="article-meta">
          <view class="meta-left">
            <text class="category-tag">{{ item.categoryName }}</text>
          </view>
          <view class="meta-right">
            <view class="meta-item">
              <text class="icon">ğŸ‘</text>
              <text class="count">{{ item.viewCount }}</text>
            </view>
            <view class="meta-item" catchtap="handleLike" data-id="{{ item._id }}">
              <text class="icon">{{ item.isLiked ? 'â¤ï¸' : 'ğŸ¤' }}</text>
              <text class="count">{{ item.likeCount }}</text>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-status" wx:if="{{ loading }}">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-status" wx:if="{{ !loading && articles.length === 0 }}">
      <text class="empty-icon">ğŸ“š</text>
      <text class="empty-text">æš‚æ— æ–‡ç« </text>
    </view>

    <!-- æ²¡æœ‰æ›´å¤š -->
    <view class="no-more-status" wx:if="{{ !loading && noMore && articles.length > 0 }}">
      <text class="no-more-text">æ²¡æœ‰æ›´å¤šäº†</text>
    </view>
  </view>

  <!-- Bannerå¹¿å‘Š -->
  <view class="ad-section">
    <ad unit-id="adunit-xxxxxxxxxxxxxxxx" ad-type="banner" ad-theme="white"></ad>
  </view>
</view>
