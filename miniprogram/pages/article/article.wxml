<!--pages/article/article.wxml-->
<view class="container">
  <!-- æ–‡ç« å¤´éƒ¨ -->
  <view class="article-header">
    <image 
      wx:if="{{ article.coverImage }}"
      class="cover-image" 
      src="{{ article.coverImage }}" 
      mode="aspectFill"
    ></image>
    <view class="header-content">
      <text class="article-title">{{ article.title }}</text>
      <view class="article-meta">
        <text class="category-tag">{{ article.categoryName }}</text>
        <text class="publish-date">{{ article.publishDate }}</text>
      </view>
    </view>
  </view>

  <!-- æ–‡ç« å†…å®¹ -->
  <view class="article-body">
    <rich-text nodes="{{ article.content }}"></rich-text>
  </view>

  <!-- æ–‡ç« æ ‡ç­¾ -->
  <view class="article-tags" wx:if="{{ article.tags && article.tags.length > 0 }}">
    <text class="tag-label">æ ‡ç­¾ï¼š</text>
    <view class="tags-list">
      <text class="tag-item" wx:for="{{ article.tags }}" wx:key="*this">{{ item }}</text>
    </view>
  </view>

  <!-- äº’åŠ¨åŒºåŸŸ -->
  <view class="interaction-section card">
    <view class="interaction-stats">
      <view class="stat-item">
        <text class="stat-icon">ğŸ‘ï¸</text>
        <text class="stat-text">{{ article.viewCount }}</text>
      </view>
      <view class="stat-item">
        <text class="stat-icon">â¤ï¸</text>
        <text class="stat-text">{{ article.likeCount }}</text>
      </view>
      <view class="stat-item">
        <text class="stat-icon">â­</text>
        <text class="stat-text">{{ article.collectCount }}</text>
      </view>
    </view>
    
    <view class="interaction-buttons">
      <button 
        class="interaction-btn {{ article.isLiked ? 'active' : '' }}" 
        bindtap="handleLike"
      >
        <text class="btn-icon">{{ article.isLiked ? 'â¤ï¸' : 'ğŸ¤' }}</text>
        <text class="btn-text">{{ article.isLiked ? 'å·²ç‚¹èµ' : 'ç‚¹èµ' }}</text>
      </button>
      <button 
        class="interaction-btn {{ article.isCollected ? 'active' : '' }}" 
        bindtap="handleCollect"
      >
        <text class="btn-icon">{{ article.isCollected ? 'â­' : 'â˜†' }}</text>
        <text class="btn-text">{{ article.isCollected ? 'å·²æ”¶è—' : 'æ”¶è—' }}</text>
      </button>
      <button class="interaction-btn" open-type="share">
        <text class="btn-icon">ğŸ“¤</text>
        <text class="btn-text">åˆ†äº«</text>
      </button>
    </view>
  </view>

  <!-- ç›¸å…³æ¨è -->
  <view class="related-section" wx:if="{{ relatedArticles.length > 0 }}">
    <view class="section-header">
      <text class="section-title">ç›¸å…³æ¨è</text>
    </view>
    <view class="related-list">
      <view 
        class="related-item" 
        wx:for="{{ relatedArticles }}" 
        wx:key="_id"
        bindtap="goToArticle"
        data-id="{{ item._id }}"
      >
        <image 
          class="related-cover" 
          src="{{ item.coverImage }}" 
          mode="aspectFill"
        ></image>
        <view class="related-info">
          <text class="related-title text-ellipsis-2">{{ item.title }}</text>
          <text class="related-meta">ğŸ‘ï¸ {{ item.viewCount }}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- Bannerå¹¿å‘Š -->
  <view class="ad-section">
    <ad unit-id="adunit-xxxxxxxxxxxxxxxx" ad-type="banner" ad-theme="white"></ad>
  </view>
</view>
