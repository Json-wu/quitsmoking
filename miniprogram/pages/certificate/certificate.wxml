<!--pages/certificate/certificate.wxml-->
<view class="container">
  <!-- è¯ä¹¦é¢„è§ˆåŒºåŸŸ -->
  <view class="certificate-preview">
    <canvas 
      type="2d" 
      id="certificate-canvas" 
      class="certificate-canvas"
    ></canvas>
  </view>

  <!-- è¯ä¹¦ä¿¡æ¯ -->
  <view class="certificate-info card">
    <view class="info-row">
      <text class="info-label">è¯ä¹¦ç­‰çº§</text>
      <text class="info-value">{{ certificateLevel }}</text>
    </view>
    <view class="info-row">
      <text class="info-label">æˆ’çƒŸå¤©æ•°</text>
      <text class="info-value">{{ quitDays }}å¤©</text>
    </view>
    <view class="info-row">
      <text class="info-label">è·å¾—æ—¥æœŸ</text>
      <text class="info-value">{{ certificateDate }}</text>
    </view>
  </view>

  <!-- è¯ä¹¦ç­‰çº§è¯´æ˜ -->
  <view class="level-section card">
    <view class="section-title">è¯ä¹¦ç­‰çº§è¯´æ˜</view>
    <view class="level-list">
      <view 
        class="level-item {{ item.unlocked ? 'unlocked' : 'locked' }}" 
        wx:for="{{ levels }}" 
        wx:key="level"
      >
        <view class="level-icon">{{ item.icon }}</view>
        <view class="level-detail">
          <text class="level-name">{{ item.name }}</text>
          <text class="level-days">{{ item.days }}å¤©</text>
        </view>
        <view class="level-status">
          <text wx:if="{{ item.unlocked }}">âœ“</text>
          <text wx:else class="text-tertiary">æœªè§£é”</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-buttons">
    <button class="action-btn generate-btn" bindtap="handleGenerate" disabled="{{ generating }}">
      <text class="btn-icon">ğŸ¨</text>
      <text class="btn-text">{{ generating ? 'ç”Ÿæˆä¸­...' : 'ç”Ÿæˆè¯ä¹¦' }}</text>
    </button>
    <button class="action-btn save-btn" bindtap="handleSave" disabled="{{ !hasGenerated }}">
      <text class="btn-icon">ğŸ’¾</text>
      <text class="btn-text">ä¿å­˜åˆ°ç›¸å†Œ</text>
    </button>
    <button class="action-btn share-btn" open-type="share" disabled="{{ !hasGenerated }}">
      <text class="btn-icon">ğŸ“¤</text>
      <text class="btn-text">åˆ†äº«è¯ä¹¦</text>
    </button>
  </view>

  <!-- æç¤ºæ–‡å­— -->
  <view class="tip-section">
    <text class="tip-text">ğŸ’¡ æ¯æ»¡5å¤©å¯ä»¥ç”Ÿæˆä¸€æ¬¡æ–°è¯ä¹¦</text>
  </view>
</view>
