# "我要戒烟"微信小程序项目需求文档

## 1. 项目概述

### 1.1 开发背景
"我要戒烟"是一款专注于帮助用户戒烟的个人工具类微信小程序。通过趣味化的互动体验、科学的记录追踪和正向激励机制,帮助有戒烟意愿的用户建立戒烟信心,养成健康生活习惯。

### 1.2 目标用户
- **主要用户**:有明确戒烟意愿的吸烟者
- **次要用户**:正在戒烟过程中需要支持和鼓励的用户
- **潜在用户**:关注健康生活方式的人群

### 1.3 核心价值
- **趣味互动**:通过电子烟模拟、动画效果等趣味化设计,降低戒烟过程的心理压力
- **记录追踪**:清晰记录戒烟天数和签到情况,可视化戒烟成果
- **正向激励**:通过签到奖励、荣誉证书、阶段性惊喜等机制持续激励用户
- **社交分享**:支持分享戒烟成果和电子烟,增强社交属性和传播性

---

## 2. 详细功能需求

### 2.1 戒烟签到系统

#### 2.1.1 每日签到功能
**功能描述**:
- 用户每天可进行一次签到操作
- 签到时间以自然日(00:00-23:59)为单位
- 签到成功后显示签到成功动画和提示语

**交互逻辑**:
1. 用户进入首页,显示"今日签到"按钮
2. 点击签到按钮触发签到动画(如打卡图标放大、烟花效果)
3. 签到成功后按钮变为"已签到"状态,当日不可再次签到
4. 显示鼓励文案(如"坚持就是胜利!""你真棒!")

**数据记录**:
- 签到日期(年-月-日)
- 签到时间戳
- 连续签到天数
- 累计签到天数

#### 2.1.2 连续签到记录
**功能描述**:
- 实时统计用户连续签到天数
- 中断签到后连续天数重置为0
- 显示历史最长连续签到记录

**展示方式**:
- 首页顶部显示"连续签到X天"
- 签到日历视图,已签到日期标记特殊颜色
- 个人中心显示签到统计数据

#### 2.1.3 补签功能
**功能描述**:
- 用户可对过去7天内漏签的日期进行补签
- 补签次数限制:每月最多3次
- 补签需观看激励视频广告

**交互逻辑**:
1. 用户点击签到日历中的漏签日期
2. 弹出补签确认弹窗,提示需观看广告
3. 用户确认后播放激励视频广告
4. 广告播放完成后补签成功,更新连续签到天数
5. 显示剩余补签次数

**限制规则**:
- 只能补签7天内的漏签
- 每月补签次数上限为3次
- 补签次数每月1号重置

---

### 2.2 戒烟天数统计

#### 2.2.1 动态天数显示
**功能描述**:
- 首页核心位置大字号显示戒烟天数
- 实时计算从开始戒烟日期到当前的天数
- 支持用户设置/修改开始戒烟日期

**展示样式**:
```
🚭 我已戒烟
[ 365 ] 天
距离目标还有 X 天
```

**交互逻辑**:
1. 首次使用时引导用户设置开始戒烟日期
2. 天数每日自动更新
3. 点击天数可查看详细统计(小时、分钟)
4. 长按可修改开始日期(需二次确认)

#### 2.2.2 阶段性惊喜
**功能描述**:
- 每满5天触发特殊惊喜效果
- 惊喜形式包括:动画特效、鼓励语、虚拟勋章等

**触发节点**:
- 5天、10天、15天...每5天一次
- 特殊节点:30天、60天、90天、180天、365天

**惊喜内容**:
- **5-25天**:烟花动画 + 鼓励文案
- **30天**:解锁"月度勇士"勋章
- **60天**:解锁"双月英雄"勋章
- **90天**:解锁"季度冠军"勋章 + 特殊证书模板
- **180天**:解锁"半年传奇"勋章
- **365天**:解锁"年度王者"勋章 + 终极证书

**交互逻辑**:
1. 达到节点天数时自动触发全屏惊喜动画
2. 显示对应勋章和鼓励文案
3. 提示用户可生成荣誉证书分享
4. 惊喜记录保存到个人中心

#### 2.2.3 健康收益统计
**功能描述**:
- 根据戒烟天数计算健康收益数据
- 展示节省金额、延长寿命等数据

**统计维度**:
- 节省香烟数量(根据用户设置的日吸烟量)
- 节省金额(根据用户设置的烟价)
- 减少尼古丁摄入量
- 肺部恢复进度百分比
- 预计延长寿命天数

**设置项**:
- 戒烟前日吸烟量(支/天)
- 香烟单价(元/包)
- 每包香烟支数

---

### 2.3 戒烟荣誉证书

#### 2.3.1 证书生成功能
**功能描述**:
- 根据当前戒烟天数自动生成电子荣誉证书
- 证书样式随戒烟天数变化(不同等级不同模板)
- 支持保存到相册和分享到微信

**证书等级**:
| 戒烟天数 | 证书等级 | 证书颜色 | 特殊元素 |
|---------|---------|---------|---------|
| 7-29天 | 初级证书 | 蓝色 | 萌芽图标 |
| 30-89天 | 中级证书 | 绿色 | 成长树图标 |
| 90-179天 | 高级证书 | 紫色 | 盾牌图标 |
| 180-364天 | 专家证书 | 金色 | 奖杯图标 |
| 365天+ | 大师证书 | 彩虹渐变 | 皇冠图标 |

**证书内容**:
```
━━━━━━━━━━━━━━━━━━━━
      戒烟荣誉证书
━━━━━━━━━━━━━━━━━━━━

        [用户昵称]

    恭喜您已成功戒烟
         [X] 天

    累计节省: ¥[金额]
    健康指数: [百分比]%

    颁发日期: [年-月-日]
    
    [等级徽章图标]
━━━━━━━━━━━━━━━━━━━━
   "我要戒烟"小程序出品
```

#### 2.3.2 证书分享功能
**功能逻辑**:
1. 用户点击"生成证书"按钮
2. 系统根据当前数据生成证书图片(Canvas绘制)
3. 提供"保存图片"和"分享好友"两个选项
4. 保存图片调用`wx.saveImageToPhotosAlbum`
5. 分享好友使用微信分享卡片,附带小程序码

**分享文案**:
- "我已成功戒烟[X]天,你也可以!"
- "戒烟第[X]天,感觉棒极了!"
- "加入我一起戒烟吧!"

---

### 2.4 电子烟互动功能

#### 2.4.1 功能概述
通过模拟真实吸烟体验,帮助用户缓解戒烟过程中的心理依赖,以虚拟互动替代真实吸烟行为。

#### 2.4.2 点火动画
**触发方式**:
- 点击电子烟底部的"点火"按钮
- 或摇一摇手机自动点火

**动画效果**:
1. 烟头位置出现火光效果(橙红色渐变)
2. 火光闪烁动画(0.5秒)
3. 播放打火机声音效果
4. 点火后烟头保持微亮状态

**状态管理**:
- 未点火状态:烟头灰色
- 已点火状态:烟头橙红色微光
- 点火后60秒自动熄灭

#### 2.4.3 吸一口动画
**触发方式**:
- 点击电子烟中部的"吸一口"按钮
- 或长按屏幕模拟吸烟动作

**动画效果**:
1. 烟头火光变亮(由暗到亮渐变)
2. 烟雾从烟头向上飘散(粒子效果)
3. 烟雾逐渐扩散并淡出
4. 播放吸烟音效

**烟雾效果实现**:
- 使用Canvas绘制烟雾粒子
- 粒子向上飘动,带有随机偏移
- 透明度逐渐降低
- 粒子数量:20-30个
- 动画时长:2-3秒

**交互反馈**:
- 每吸一口记录一次
- 显示"今日已吸X口"统计
- 累计吸烟次数显示在个人中心

#### 2.4.4 抖烟灰动画
**触发方式**:
- 点击"抖烟灰"按钮
- 或摇动手机触发(使用重力感应API)

**动画效果**:
1. 烟头位置掉落灰色颗粒
2. 颗粒向下飘落并逐渐消失
3. 烟头长度略微变短(视觉效果)
4. 播放抖灰音效

**状态限制**:
- 只有点火后才能抖烟灰
- 每次吸烟后才会产生烟灰

#### 2.4.5 再来一根功能
**功能描述**:
- 重置当前电子烟状态
- 生成新的电子烟

**交互逻辑**:
1. 用户点击"再来一根"按钮
2. 当前电子烟淡出动画
3. 新电子烟从下方滑入
4. 重置所有状态(未点火)
5. 记录"再来一根"次数

**统计数据**:
- 今日"再来一根"次数
- 累计"再来一根"次数
- 平均每根"吸烟"次数

#### 2.4.6 送烟功能
**功能描述**:
- 将电子烟分享给微信好友
- 好友点击后可接收电子烟并使用

**交互流程**:
1. 用户点击"送烟"按钮
2. 选择分享方式(好友/群聊)
3. 生成分享卡片,包含:
   - 标题:"[昵称]给你送了一根电子烟"
   - 描述:"戒烟神器,点击领取!"
   - 缩略图:电子烟图片
4. 好友点击卡片进入小程序
5. 显示"领取电子烟"动画
6. 自动进入电子烟互动页面

**分享激励**:
- 每成功邀请1位好友使用,送烟者获得1次补签机会
- 显示"已送出X根烟"统计

---

### 2.5 拒烟神器

#### 2.5.1 功能描述
当用户面临吸烟诱惑时,可快速打开"拒烟神器"功能,全屏横屏显示"戒烟中"等拒绝文案,帮助用户坚定意志。

#### 2.5.2 显示效果
**屏幕方向**:
- 强制横屏显示
- 全屏模式(隐藏导航栏)

**显示内容**:
```
━━━━━━━━━━━━━━━━━━━━━━━━━━
        🚭
      戒 烟 中
   请勿劝烟,谢谢配合!
━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**样式设计**:
- 背景色:醒目的红色或橙色
- 文字:白色、超大字号(60-80rpx)
- 禁烟图标:动画效果(旋转或闪烁)
- 支持自定义文案

#### 2.5.3 交互逻辑
1. 用户点击首页"拒烟神器"入口
2. 页面切换为横屏全屏模式
3. 显示拒烟文案
4. 点击屏幕任意位置或返回按钮退出
5. 记录使用次数和时长

#### 2.5.4 自定义文案
**预设文案列表**:
- "戒烟中,请勿劝烟!"
- "我在戒烟,谢谢理解!"
- "为了健康,我选择戒烟!"
- "戒烟第X天,请支持我!"
- "不抽烟,更健康!"

**自定义功能**:
- 用户可在设置中自定义拒烟文案
- 最多支持20个汉字
- 支持添加emoji表情

---

### 2.6 戒烟方法

#### 2.6.1 内容分类
**方法分类**:
1. **科学戒烟法**
   - 尼古丁替代疗法
   - 药物辅助戒烟
   - 行为疗法
   
2. **心理调节法**
   - 意志力训练
   - 压力管理
   - 正念冥想

3. **生活习惯法**
   - 饮食调整
   - 运动锻炼
   - 作息规律

4. **应对技巧**
   - 烟瘾来袭时的应对
   - 社交场合的应对
   - 戒断反应的处理

#### 2.6.2 内容展示
**列表页面**:
- 卡片式布局
- 每个方法显示:标题、简介、阅读量、收藏状态
- 支持搜索和分类筛选

**详情页面**:
- 文章标题
- 发布时间
- 正文内容(富文本)
- 配图/视频
- 相关推荐

#### 2.6.3 互动功能
- **收藏**:收藏喜欢的文章
- **点赞**:为有帮助的内容点赞
- **分享**:分享给好友
- **评论**:用户可留言交流(需审核)

#### 2.6.4 内容管理
**数据存储**:
- 文章存储在云数据库
- 图片/视频存储在云存储
- 支持后台管理系统增删改查

**内容更新**:
- 定期更新戒烟方法文章
- 推送热门文章通知
- 根据用户戒烟天数推荐相应内容

---

### 2.7 广告接入

#### 2.7.1 激励视频广告
**展示时机**:
- 用户打开小程序时(首次启动)
- 使用补签功能时
- 生成高级证书时(可选观看获得特殊边框)

**展示逻辑**:
1. 在合适时机触发广告
2. 显示"观看广告获得奖励"提示
3. 用户确认后播放激励视频
4. 播放完成后发放奖励
5. 用户可选择跳过(部分场景)

**奖励机制**:
- 补签:观看完成后补签成功
- 证书:观看完成后解锁特殊证书边框
- 每日奖励:观看广告获得额外签到奖励

#### 2.7.2 Banner广告
**展示位置**:
- 首页底部
- 戒烟方法列表页底部
- 个人中心页底部

**展示规则**:
- 固定在页面底部
- 不遮挡主要内容
- 可关闭(关闭后当前页面不再显示)

**广告样式**:
- 使用微信官方Banner广告组件
- 自动适配屏幕宽度
- 高度:80-100rpx

#### 2.7.3 广告配置
**广告单元ID**:
- 激励视频广告单元ID
- Banner广告单元ID
- 需在微信公众平台配置

**广告控制**:
- 支持后台开关广告
- 可设置广告展示频率
- 可设置广告展示条件(如戒烟天数>7天)

---

### 2.8 个人中心

#### 2.8.1 用户信息
**展示内容**:
- 微信头像和昵称
- 戒烟天数徽章
- 会员等级(根据戒烟天数)

**可编辑信息**:
- 开始戒烟日期
- 戒烟前吸烟量
- 香烟价格设置

#### 2.8.2 数据统计
**统计维度**:
- 累计签到天数
- 连续签到天数
- 历史最长连续签到
- 累计"吸电子烟"次数
- 累计"送烟"次数
- 补签剩余次数
- 获得的勋章列表

#### 2.8.3 功能入口
- 我的证书
- 我的收藏(戒烟方法)
- 签到日历
- 设置中心
- 关于我们
- 意见反馈

#### 2.8.4 设置功能
**通知设置**:
- 签到提醒(每日定时)
- 阶段性惊喜提醒
- 文章更新提醒

**隐私设置**:
- 是否允许分享数据
- 是否显示在排行榜

**其他设置**:
- 清除缓存
- 检查更新
- 用户协议
- 隐私政策

---

## 3. 技术栈选择

### 3.1 前端技术

#### 3.1.1 开发框架
**微信小程序原生框架**
- **选择理由**:
  - 官方支持,稳定性高
  - 性能优秀,加载速度快
  - 无需额外编译,开发效率高
  - 完整的API支持
  - 社区资源丰富

#### 3.1.2 UI组件库
**推荐使用**:
- **Vant Weapp**:轻量级UI组件库
- **WeUI**:微信官方设计规范组件库

**自定义组件**:
- 电子烟组件
- 证书生成组件
- 签到日历组件
- 动画效果组件

#### 3.1.3 动画实现
**技术方案**:
1. **CSS3动画**:简单过渡效果
2. **小程序Animation API**:复杂动画序列
3. **Canvas**:烟雾粒子效果、证书绘制
4. **Lottie**:复杂矢量动画(可选)

**动画库**:
- `wx.createAnimation()`:创建动画实例
- `canvas 2d`:绘制烟雾和证书

### 3.2 后端技术

#### 3.2.1 云开发
**微信云开发**
- **云数据库**:存储用户数据、签到记录、文章内容
- **云函数**:处理业务逻辑、数据统计
- **云存储**:存储图片、视频资源

**优势**:
- 无需自建服务器
- 自动扩容,按量付费
- 与小程序深度集成
- 开发成本低

#### 3.2.2 数据库设计
**集合(Collection)设计**:

1. **users(用户表)**
```javascript
{
  _openid: "用户openid",
  nickName: "昵称",
  avatarUrl: "头像URL",
  quitDate: "开始戒烟日期",
  dailyCigarettes: 20, // 戒烟前日吸烟量
  cigarettePrice: 15, // 香烟价格
  createTime: "创建时间",
  updateTime: "更新时间"
}
```

2. **checkins(签到表)**
```javascript
{
  _openid: "用户openid",
  date: "签到日期(YYYY-MM-DD)",
  timestamp: "签到时间戳",
  is补签: false,
  continuousDays: 10 // 连续签到天数
}
```

3. **cigarettes(电子烟记录)**
```javascript
{
  _openid: "用户openid",
  date: "日期",
  puffCount: 50, // 吸烟次数
  newCigaretteCount: 5, // 再来一根次数
  shareCount: 2 // 送烟次数
}
```

4. **articles(文章表)**
```javascript
{
  title: "文章标题",
  category: "分类",
  content: "富文本内容",
  coverImage: "封面图URL",
  viewCount: 1000, // 阅读量
  likeCount: 50, // 点赞数
  publishTime: "发布时间"
}
```

5. **certificates(证书记录)**
```javascript
{
  _openid: "用户openid",
  days: 30, // 戒烟天数
  level: "中级", // 证书等级
  imageUrl: "证书图片URL",
  createTime: "生成时间"
}
```

#### 3.2.3 云函数设计
**核心云函数**:
1. **getUserStats**:获取用户统计数据
2. **checkIn**:签到逻辑处理
3. **补签**:补签逻辑处理
4. **generateCertificate**:生成证书
5. **getArticles**:获取文章列表
6. **recordPuff**:记录吸烟行为

### 3.3 第三方服务

#### 3.3.1 广告服务
- **微信广告组件**:激励视频、Banner广告
- **广告管理平台**:微信公众平台广告管理

#### 3.3.2 数据统计
- **微信小程序数据分析**:用户行为分析
- **自定义埋点**:关键操作统计

#### 3.3.3 消息推送
- **订阅消息**:签到提醒、阶段性惊喜通知
- **模板消息**:重要通知

---

## 4. 页面结构规划

### 4.1 页面架构图
```
我要戒烟小程序
├── 首页(Home)
│   ├── 戒烟天数展示
│   ├── 签到按钮
│   ├── 快捷入口(电子烟/拒烟神器/证书)
│   └── Banner广告
├── 电子烟互动页(Cigarette)
│   ├── 电子烟展示区
│   ├── 操作按钮(点火/吸一口/抖灰/再来一根)
│   ├── 送烟按钮
│   └── 统计数据
├── 荣誉证书页(Certificate)
│   ├── 证书预览
│   ├── 生成证书按钮
│   ├── 保存/分享按钮
│   └── 历史证书列表
├── 拒烟神器页(Refuse)
│   ├── 全屏横屏显示
│   ├── 拒烟文案
│   └── 自定义文案设置
├── 戒烟方法页(Methods)
│   ├── 分类导航
│   ├── 文章列表
│   ├── 搜索功能
│   └── Banner广告
├── 文章详情页(Article)
│   ├── 文章内容
│   ├── 收藏/点赞/分享
│   └── 相关推荐
└── 个人中心页(Profile)
    ├── 用户信息
    ├── 数据统计
    ├── 功能入口
    ├── 设置
    └── Banner广告
```

### 4.2 页面详细设计

#### 4.2.1 首页(Home)
**页面路径**:`pages/home/home`

**布局结构**:
```
┌─────────────────────────┐
│  [导航栏: 我要戒烟]      │
├─────────────────────────┤
│  🚭 我已戒烟             │
│     [ 365 ] 天          │
│  距离目标还有 X 天       │
├─────────────────────────┤
│  [今日签到] 按钮         │
│  连续签到: 30天          │
├─────────────────────────┤
│  ┌────┐ ┌────┐ ┌────┐  │
│  │电子│ │拒烟│ │荣誉│  │
│  │烟  │ │神器│ │证书│  │
│  └────┘ └────┘ └────┘  │
├─────────────────────────┤
│  健康收益统计             │
│  💰 节省: ¥1825         │
│  🚬 少抽: 7300支        │
│  ❤️ 健康指数: 85%       │
├─────────────────────────┤
│  戒烟方法推荐             │
│  [文章卡片列表]          │
├─────────────────────────┤
│  [Banner广告]           │
└─────────────────────────┘
```

**交互功能**:
- 点击天数查看详细统计
- 点击签到按钮进行签到
- 点击快捷入口跳转对应页面
- 下拉刷新更新数据

#### 4.2.2 电子烟互动页(Cigarette)
**页面路径**:`pages/cigarette/cigarette`

**布局结构**:
```
┌─────────────────────────┐
│  [导航栏: 电子烟]        │
├─────────────────────────┤
│                         │
│      [电子烟图片]        │
│      (Canvas动画区)     │
│                         │
├─────────────────────────┤
│  ┌────┐ ┌────┐         │
│  │点火│ │吸一│         │
│  └────┘ └────┘         │
│  ┌────┐ ┌────┐         │
│  │抖灰│ │再来│         │
│  └────┘ └────┘         │
├─────────────────────────┤
│  [送烟给好友] 按钮       │
├─────────────────────────┤
│  今日统计:               │
│  吸了 X 口 | 抖了 Y 次  │
└─────────────────────────┘
```

**交互功能**:
- 点火:触发点火动画
- 吸一口:触发烟雾效果
- 抖灰:触发烟灰掉落
- 再来一根:重置电子烟
- 送烟:分享给好友
- 支持摇一摇触发点火和抖灰

#### 4.2.3 荣誉证书页(Certificate)
**页面路径**:`pages/certificate/certificate`

**布局结构**:
```
┌─────────────────────────┐
│  [导航栏: 荣誉证书]      │
├─────────────────────────┤
│  当前等级: 高级证书      │
│  戒烟天数: 90天          │
├─────────────────────────┤
│                         │
│    [证书预览区]          │
│    (Canvas绘制)         │
│                         │
├─────────────────────────┤
│  ┌──────┐ ┌──────┐     │
│  │生成证│ │保存图│     │
│  │书    │ │片    │     │
│  └──────┘ └──────┘     │
│  ┌──────────────┐       │
│  │ 分享给好友    │       │
│  └──────────────┘       │
├─────────────────────────┤
│  历史证书:               │
│  [证书缩略图列表]        │
└─────────────────────────┘
```

**交互功能**:
- 实时预览当前证书
- 生成高清证书图片
- 保存到相册
- 分享到微信
- 查看历史证书

#### 4.2.4 拒烟神器页(Refuse)
**页面路径**:`pages/refuse/refuse`

**布局结构**(横屏全屏):
```
┌───────────────────────────────────┐
│                                   │
│           🚭                      │
│        戒 烟 中                   │
│    请勿劝烟,谢谢配合!             │
│                                   │
│    [点击屏幕退出]                 │
│                                   │
└───────────────────────────────────┘
```

**交互功能**:
- 进入页面自动横屏全屏
- 禁烟图标动画效果
- 点击任意位置退出
- 支持自定义文案

#### 4.2.5 戒烟方法页(Methods)
**页面路径**:`pages/methods/methods`

**布局结构**:
```
┌─────────────────────────┐
│  [导航栏: 戒烟方法]      │
├─────────────────────────┤
│  [搜索框]               │
├─────────────────────────┤
│  [分类Tab]              │
│  全部|科学|心理|生活|技巧│
├─────────────────────────┤
│  ┌─────────────────┐   │
│  │ [文章卡片]       │   │
│  │ 标题             │   │
│  │ 简介...          │   │
│  │ 👁️ 1000  ❤️ 50  │   │
│  └─────────────────┘   │
│  ┌─────────────────┐   │
│  │ [文章卡片]       │   │
│  └─────────────────┘   │
├─────────────────────────┤
│  [Banner广告]           │
└─────────────────────────┘
```

**交互功能**:
- 搜索文章
- 分类筛选
- 点击卡片进入详情
- 收藏文章
- 下拉刷新

#### 4.2.6 文章详情页(Article)
**页面路径**:`pages/article/article`

**布局结构**:
```
┌─────────────────────────┐
│  [导航栏: 文章标题]      │
├─────────────────────────┤
│  文章标题                │
│  发布时间 | 阅读量       │
├─────────────────────────┤
│                         │
│  [文章正文内容]          │
│  (富文本显示)            │
│                         │
├─────────────────────────┤
│  ┌────┐ ┌────┐ ┌────┐ │
│  │收藏│ │点赞│ │分享│ │
│  └────┘ └────┘ └────┘ │
├─────────────────────────┤
│  相关推荐:               │
│  [文章列表]              │
└─────────────────────────┘
```

**交互功能**:
- 富文本内容展示
- 收藏/取消收藏
- 点赞
- 分享文章
- 查看相关推荐

#### 4.2.7 个人中心页(Profile)
**页面路径**:`pages/profile/profile`

**布局结构**:
```
┌─────────────────────────┐
│  [导航栏: 个人中心]      │
├─────────────────────────┤
│  [头像] 昵称             │
│  🏆 高级戒烟者           │
├─────────────────────────┤
│  数据统计                │
│  ┌────┐ ┌────┐ ┌────┐ │
│  │签到│ │电子│ │送烟│ │
│  │30天│ │500│ │10次│ │
│  └────┘ └────┘ └────┘ │
├─────────────────────────┤
│  我的勋章                │
│  🥉🥈🥇🏆👑             │
├─────────────────────────┤
│  功能入口                │
│  > 我的证书              │
│  > 我的收藏              │
│  > 签到日历              │
│  > 设置中心              │
│  > 关于我们              │
│  > 意见反馈              │
├─────────────────────────┤
│  [Banner广告]           │
└─────────────────────────┘
```

**交互功能**:
- 查看个人信息
- 查看数据统计
- 查看勋章墙
- 进入各功能页面
- 设置个人信息

### 4.3 页面跳转关系
```
首页 ──→ 电子烟互动页
  │
  ├──→ 荣誉证书页
  │
  ├──→ 拒烟神器页
  │
  ├──→ 戒烟方法页 ──→ 文章详情页
  │
  └──→ 个人中心页 ──→ 设置页
                   ├──→ 我的证书页
                   ├──→ 我的收藏页
                   ├──→ 签到日历页
                   └──→ 关于我们页
```

---

## 5. 开发计划

### 5.1 开发阶段划分

#### 第一阶段:基础框架搭建(1周)
- [ ] 项目初始化
- [ ] 云开发环境配置
- [ ] 页面结构创建
- [ ] 底部导航栏配置
- [ ] 基础UI组件封装

#### 第二阶段:核心功能开发(2-3周)
- [ ] 用户系统(登录/授权)
- [ ] 签到系统
- [ ] 戒烟天数统计
- [ ] 电子烟互动功能
- [ ] 证书生成功能

#### 第三阶段:辅助功能开发(1-2周)
- [ ] 拒烟神器
- [ ] 戒烟方法内容管理
- [ ] 个人中心
- [ ] 数据统计
- [ ] 分享功能

#### 第四阶段:优化与测试(1周)
- [ ] 性能优化
- [ ] 动画效果优化
- [ ] 兼容性测试
- [ ] 用户体验优化
- [ ] Bug修复

#### 第五阶段:上线准备(3-5天)
- [ ] 广告接入
- [ ] 小程序审核资料准备
- [ ] 隐私协议/用户协议
- [ ] 提交审核
- [ ] 正式发布

### 5.2 技术难点与解决方案

#### 难点1:烟雾粒子动画
**解决方案**:
- 使用Canvas 2D绘制粒子
- 实现粒子系统(位置、速度、透明度)
- 使用requestAnimationFrame优化性能

#### 难点2:证书图片生成
**解决方案**:
- Canvas绘制证书内容
- 使用`canvasToTempFilePath`导出图片
- 处理不同等级的证书模板

#### 难点3:横屏全屏显示
**解决方案**:
- 使用`wx.setScreenBrightness`设置屏幕亮度
- 页面配置`"pageOrientation": "landscape"`
- 隐藏导航栏实现全屏效果

#### 难点4:摇一摇功能
**解决方案**:
- 使用`wx.onAccelerometerChange`监听重力感应
- 计算加速度变化判断摇动
- 设置阈值避免误触发

---

## 6. 非功能性需求

### 6.1 性能要求
- 首屏加载时间 < 2秒
- 页面切换流畅,无卡顿
- 动画帧率 ≥ 30fps
- 图片加载优化(懒加载、压缩)

### 6.2 兼容性要求
- 支持微信版本 ≥ 7.0.0
- 支持iOS 10+
- 支持Android 5.0+
- 适配不同屏幕尺寸

### 6.3 安全性要求
- 用户数据加密存储
- 敏感操作需用户授权
- 防止数据篡改
- 遵守微信小程序规范

### 6.4 可维护性要求
- 代码模块化、组件化
- 统一的代码规范
- 完善的注释文档
- 便于后期功能扩展

---

## 7. 运营策略建议

### 7.1 用户增长
- 分享裂变:送烟功能、证书分享
- 社交传播:朋友圈分享、群聊推广
- 内容营销:戒烟方法文章吸引流量

### 7.2 用户留存
- 签到机制:培养用户习惯
- 阶段性奖励:持续激励
- 趣味互动:降低戒烟压力

### 7.3 商业化
- 广告收入:激励视频、Banner广告
- 增值服务:高级证书模板、专属勋章
- 电商导流:戒烟辅助产品推荐

---

## 8. 后续迭代方向

### 8.1 社区功能
- 戒烟打卡社区
- 用户经验分享
- 互助小组

### 8.2 数据分析
- 戒烟成功率统计
- 用户行为分析
- 个性化推荐

### 8.3 AI功能
- AI戒烟助手
- 智能提醒
- 个性化戒烟计划

### 8.4 健康管理
- 健康数据追踪
- 体检报告对比
- 健康建议推送

---

## 9. 附录

### 9.1 参考资料
- 微信小程序官方文档
- 微信云开发文档
- 戒烟相关医学资料

### 9.2 设计规范
- 微信小程序设计指南
- UI设计稿(待补充)
- 交互原型(待补充)

### 9.3 联系方式
- 产品负责人:[姓名]
- 技术负责人:[姓名]
- 设计负责人:[姓名]

---

**文档版本**: v1.0  
**创建日期**: 2026-01-14  
**最后更新**: 2026-01-14  
**文档状态**: 待评审
