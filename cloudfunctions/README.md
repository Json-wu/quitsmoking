# 云函数说明

## 已创建的云函数

### 1. login - 用户登录
- **功能**: 用户登录，自动创建新用户
- **返回**: openid, success

### 2. getUserStats - 获取用户统计
- **功能**: 获取用户完整统计数据
- **返回**: 用户信息、戒烟数据、签到数据、健康收益等

### 3. checkIn - 每日签到
- **功能**: 用户每日签到，自动计算连续天数，解锁勋章
- **返回**: 签到结果、连续天数、新勋章

## 待创建的云函数

### 4. setQuitDate - 设置戒烟日期
- **功能**: 设置或修改用户的开始戒烟日期
- **参数**: quitDate (YYYY-MM-DD)

### 5. makeUpCheckIn - 补签
- **功能**: 补签漏签日期，需观看广告
- **参数**: date (YYYY-MM-DD)

### 6. generateCertificate - 生成证书
- **功能**: 生成戒烟荣誉证书
- **参数**: days, level

### 7. recordPuff - 记录电子烟行为
- **功能**: 记录吸烟、抖灰、再来一根等行为
- **参数**: type, count

### 8. getArticles - 获取文章列表
- **功能**: 获取戒烟方法文章列表
- **参数**: category, page, pageSize

### 9. getArticleDetail - 获取文章详情
- **功能**: 获取文章详细内容
- **参数**: articleId

### 10. collectArticle - 收藏文章
- **功能**: 收藏或取消收藏文章
- **参数**: articleId

### 11. likeArticle - 点赞文章
- **功能**: 为文章点赞
- **参数**: articleId

## 部署说明

1. 在微信开发者工具中右键云函数目录
2. 选择"上传并部署:云端安装依赖"
3. 等待部署完成

## 注意事项

- 所有云函数都需要先初始化云开发环境
- 确保数据库集合已创建
- 配置好数据库权限
- 测试时注意云函数日志
